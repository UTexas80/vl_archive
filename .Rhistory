dx_condor_key[id_strike == 2,]
dx_condor_key[id_strike == 2 | id_strike == 3,]
dcast(dx_condor_key[id_strike == 2 | id_strike == 3,], TKR + CMPRICE ~ id_strike, value.var = "strike",  sep = "_")
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
dx_condor
view(dx_condor)
print(dx_condor)
view(dx_condor)
View(dx_condor)
head(dx_condor)
viewxl:::view_in_xl()
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
dx_condor_strike_diff
dx_condor_key
dx_condor_key[id_strike == 2 | id_strike == 3,]
g<-dx_condor_key[id_strike == 2 | id_strike == 3,]       ][
g < -dx_condor_key[id_strike == 2 | id_strike == 3,][ , diff := STRIKE - shift(STRIKE), by = TKR ]
g < -dx_condor_key[id_strike == 2 | id_strike == 3,][ , diff := strike - shift(strike), by = TKR ]
g < -dx_condor_key[id_strike == 2 | id_strike == 3,]
g <- dx_condor_key[id_strike == 2 | id_strike == 3,][ , diff := strike - shift(strike), by = TKR ]
g
g <- dx_condor_key[id_strike == 1 | id_strike == 4,][ , diff := strike - shift(strike), by = TKR ]
g
g <- dx_condor_key[id_strike == 1 | id_strike == 4,][ , diff := abs(strike - shift(strike)), by = TKR ]
g
g <- dx_condor_key[id_strike == 2 | id_strike == 3,][ , diff := strike - shift(strike), by = TKR ]
[dx_condor_key[id_strike == 1 | id_strike == 4,]][ , diff := abs(strike - shift(strike)), by = TKR ]
g <- dx_condor_key[id_strike == 2 | id_strike == 3,][ , diff := strike - shift(strike), by = TKR ] %>%
.dx_condor_key[id_strike == 1 | id_strike == 4,][ , diff := abs(strike - shift(strike)), by = TKR ]
g <- rbind(dx_condor_key[id_strike == 2 | id_strike == 3,][ , diff := strike - shift(strike), by = TKR ]
dx_condor_key[id_strike == 1 | id_strike == 4,][ , diff := abs(strike - shift(strike)), by = TKR ])
g <- rbind(dx_condor_key[id_strike == 2 | id_strike == 3,][ , diff := strike - shift(strike), by = TKR ],
dx_condor_key[id_strike == 1 | id_strike == 4,][ , diff := abs(strike - shift(strike)), by = TKR ])
g
dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
)
merge(dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
),   dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
))
merge(dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
),   dcast(
dx_condor_key[id_strike == 1 | id_strike == 4,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
))
dx_condor_key
setorder(dx_condor_key, TKR, id_strike)
dx_condor_key
merge(dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
),   dcast(
dx_condor_key[id_strike == 1 | id_strike == 4,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
))
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
View(dx_condor)
View(dx_condor_cost)
View(dx_condor_key)
View(dx_condor_strike)
View(dx_condor_strike_diff)
View(dx_condor_strike_disp)
dcast(
dx_condor_key[id_strike > 1,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
)
dcast(
dx_condor_key[,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
)
dcast(
dx_condor_key,
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
)
dx_condor_key
dx_condor_key[id_strike == 2 | id_strike == 3,]
setorder(dx_condor_key[id_strike == 2 | id_strike == 3,], TKR, -id_strike)
y<-setorder(dx_condor_key[id_strike == 2 | id_strike == 3,], TKR, -id_strike)
y
dx_condor_key
setorder(dx_condor_key, TKR, -id_strike)
dx_condor_key
x<-dx_condor_key
x[], .(diff   =  strike - shift(strike)]
x[, .(diff   =  strike - shift(strike)]
x[, .(diff   =  strike - shift(strike)), by = TKR]
setorder(dx_condor_key, TKR, id_strike)
x<-dx_condor_key
x[, .(diff = strike - shift(strike)), by = TKR]
dx_condor_key
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
cbind(dx_condor_key, dt_date_run[,1])
dt_date_run
View(dt_date_run)
ls()
dt_dt
ls_dt
dtObj           <- setDT(lsos(), keep.rownames = T)[]
names(dtObj)[1] <- "Name" ### rename data.table column
lsObj           <- list(dtObj[Type == 'data.table' & Length_Rows == 0][,1])
ls_dt           <- list(dtObj[Type == 'data.table'][,1])
# ------------------------------------------------------------------------------
dt_dt           <- data.table::tables()
dx_date_exp
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
rlang::last_trace()
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
traceback()
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
dt_date_run
dx_condor_key
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
traceback())
traceback()
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
dx_condor_key
names(dx_condor_key)[1]   <<- "date_run"
dx_condor_key
names(dx_condor_key)[6]  <- "date_run"
dx_condor_key
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
dx_condor_key
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
View(dx_condor_roi)
dx_condor_pop
View(dx_condor_pop)
dx_condor_max_profit[
!id_strike %% 2 == 1
]
dx_condor_max_profit[!id_strike %% 2 == 1]
dx_condor_key[!id_strike %% 2 == 1]
dx_condor_key[id_strike %% 2 == 1]
dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
)
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = "ASK",
sep = "_")
merge(dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
),   dcast(
dx_condor_key[id_strike == 1 | id_strike == 4,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
))
View(dx_condor_max_profit)
View(dx_condor_max_loss)
data.table::setkey(dx_condor_key, OPTKR)
data.table::setkey(dx_blob, OPTKR)
dx_condor_key[!(id_strike > 1 & id_strike < 4),
][
dx_blob,
nomatch = 0
][
#  , c(1:4, 24, 5)
, c("TKR", "CMPRICE", "OPTKR", "id_strike", "ASK", "strike")
][
, ASK := ASK * -1
]
dx_condor_max_profit <<-
dx_condor_key[!(id_strike > 1 & id_strike < 4),
][
dx_blob,
nomatch = 0
][
#  , c(1:4, 24, 5)
, c("TKR", "CMPRICE", "OPTKR", "id_strike", "ASK", "strike")
][
, ASK := ASK * -1
]
#...............................................................................
# browser()
#...............................................................................
# ------------------------------------------------------------------------------
# Total maximum potential profit =
#   Net premium from the call spread + Net premium from the put spread
# https://tinyurl.com/v4wvb3ke
# ------------------------------------------------------------------------------
dx_condor_max_profit <<- data.table::setorder(
rbind(
dx_condor_max_profit,
dx_condor_key[id_strike > 1 & id_strike < 4,
][
dx_blob,
nomatch = 0
][
#     , c(1:4, 23, 5)
, c("TKR", "CMPRICE", "OPTKR", "id_strike", "BID", "strike")
],
use.names = FALSE
), TKR, id_strike
)
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
dx_condor_max_profit
data.table::merge.data.table(
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = "ASK",
sep = "_"),
dx_condor_cost[, max(diff), by = .(TKR)]
)
dx_condor_cost <-
data.table::setorder(
na.omit(
rbind(
dx_condor_max_profit[
!id_strike %% 2 == 1
][, .(c_p    = 'c',
diff   =  strike - shift(strike),
profit = sum(ASK),
loss   = (strike - shift(strike)) - sum(ASK)
),
by = TKR
],
dx_condor_max_profit[
id_strike %% 2 == 1
][, .(c_p    = 'p',
diff   =  strike - shift(strike),
profit = sum(ASK),
loss   = (strike - shift(strike)) - sum(ASK)
),
by = TKR
]
)
), TKR
)
dx_condor_max_profit
View(dx_condor_cost)
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = "ASK",
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = c("ASK", "strike"),
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = c("ASK", "strike)",
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = c("ASK", "strike)",
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = c("ASK", "strike"),
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = c("ASK","strike"),
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = list("ASK","strike"),
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = "ask",
sep = "_")
dcast(dx_condor_max_profit,
TKR + CMPRICE ~ id_strike,
value.var = "ASK",
sep = "_")
dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
)
dcast(
dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_"
)
dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
]
dx_condor_key[id_strike == 1 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = TKR
]
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
]
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = TKR
]
na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = TKR
]))
setorder(na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = TKR
])), TKR)
s<-setorder(na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = TKR
])), TKR)
View(s)
dcast.data.table(s, TKR, value.var = "diff")
dcast.data.table(s, "TKR", value.var = "diff")
dcast.data.table(s, "TKR" ~"diff")
na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff_inner   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff_outer_c   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff_outer_put   =  strike - shift(strike)),
by = TKR
]))
na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff_inner   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff_outer_c   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff_outer_put   =  strike - shift(strike)),
by = TKR
]), names = F)
na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff_inner   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff_outer_c   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff_outer_put   =  strike - shift(strike)),
by = TKR
]), names=FALSE)
s<-setorder(na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = TKR
])), TKR)
na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = TKR
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = TKR
]))
na.omit(rbind(dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = c(TKR, id_strike)
],
dx_condor_key[id_strike == 1 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = c(TKR, id_strike)
],
dx_condor_key[id_strike == 2 | id_strike == 4,
][, .(diff   =  strike - shift(strike)),
by = c(TKR, id_strike)
]))
dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = c(TKR, id_strike)
]
dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = c("TKR", "id_strike")
]
dx_condor_key[id_strike == 2 | id_strike == 3,
][, .(diff   =  strike - shift(strike)),
by = c("TKR", "id_strike", "strike")
]
dx_condor_key[id_strike == 2 | id_strike == 3,]
dcast(dx_condor_key,
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
dcast(dx_condor_key[id_strike == 2 | id_strike == 3,
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
dcast(dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
# Assuming your original code is like this
result <- dcast(dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
# Now, rename the columns '2' and '3' to more meaningful names
colnames(result) <- c("TKR", "CMPRICE", "strike_2", "strike_3")
# Assuming your original code is like this
result <- dcast(dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
# Now, rename the columns '2' and '3' to more meaningful names
colnames(result) <- c("TKR", "CMPRICE", "strike_2", "strike_3")
source("C:/Users/falkg/OneDrive/Documents/GitHub/vl_archive/vl_archive.r", echo=TRUE)
# Assuming your original code is like this
result <- dcast(dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
# Now, rename the columns '2' and '3' to more meaningful names
colnames(result) <- c("TKR", "CMPRICE", "strike_2", "strike_3")
# Create a new column by subtracting 'strike_2' from 'strike_3'
result$strike_difference <- result$strike_3 - result$strike_2
dcast(dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
dcast(dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
result <- dcast(dx_condor_key[id_strike == 2 | id_strike == 3,],
TKR + CMPRICE ~ id_strike,
value.var = "strike",
sep = "_")
# Now, rename the columns '2' and '3' to more meaningful names
colnames(result) <- c("TKR", "CMPRICE", "strike_2", "strike_3")
# Create a new column by subtracting 'strike_2' from 'strike_3'
result$strike_difference <- result$strike_3 - result$strike_2
result
# Create a new column by subtracting 'strike_2' from 'strike_3'
result$strike_difference <- result$strike_3 - result$strike_2
result
